{"version":3,"file":"nuxt-img-e4923e79.js","sources":["../../../../node_modules/nuxt/dist/head/runtime/composables.mjs","../../../../node_modules/@nuxt/image-edge/dist/runtime/composables.mjs","../../../../node_modules/@nuxt/image-edge/dist/runtime/utils/prerender.mjs","../../../../node_modules/@nuxt/image-edge/dist/runtime/components/_base.mjs","../../../../node_modules/@nuxt/image-edge/dist/runtime/components/nuxt-img.mjs"],"sourcesContent":["import { useSeoMeta as _useSeoMeta } from \"@vueuse/head\";\nimport { useNuxtApp } from \"#app/nuxt\";\nexport function useHead(input, options) {\n  return useNuxtApp()._useHead(input, options);\n}\nexport const useSeoMeta = (meta) => {\n  return _useSeoMeta(meta);\n};\nexport const useServerSeoMeta = (meta) => {\n  if (process.server) {\n    return _useSeoMeta(meta);\n  }\n};\n","import { useNuxtApp } from \"#imports\";\nexport const useImage = () => {\n  return useNuxtApp().$img;\n};\n","import { appendHeader } from \"h3\";\nimport { useRequestEvent } from \"#imports\";\nexport function prerenderStaticImages(src = \"\", srcset = \"\") {\n  if (!process.server || !process.env.prerender) {\n    return;\n  }\n  const paths = [\n    src,\n    ...srcset.split(\", \").map((s) => s.trim().split(\" \")[0].trim())\n  ].filter((s) => s && s.includes(\"/_ipx/\"));\n  if (!paths.length) {\n    return;\n  }\n  appendHeader(\n    useRequestEvent(),\n    \"x-nitro-prerender\",\n    paths.map((p) => encodeURIComponent(p)).join(\", \")\n  );\n}\n","import { computed } from \"vue\";\nimport { parseSize } from \"../utils/index.mjs\";\nexport const baseImageProps = {\n  src: { type: String, required: true },\n  format: { type: String, default: void 0 },\n  quality: { type: [Number, String], default: void 0 },\n  background: { type: String, default: void 0 },\n  fit: { type: String, default: void 0 },\n  modifiers: { type: Object, default: void 0 },\n  preset: { type: String, default: void 0 },\n  provider: { type: String, default: void 0 },\n  sizes: { type: [Object, String], default: void 0 },\n  preload: { type: Boolean, default: void 0 },\n  width: { type: [String, Number], default: void 0 },\n  height: { type: [String, Number], default: void 0 },\n  alt: { type: String, default: void 0 },\n  referrerpolicy: { type: String, default: void 0 },\n  usemap: { type: String, default: void 0 },\n  longdesc: { type: String, default: void 0 },\n  ismap: { type: Boolean, default: void 0 },\n  loading: { type: String, default: void 0 },\n  crossorigin: {\n    type: [Boolean, String],\n    default: void 0,\n    validator: (val) => [\"anonymous\", \"use-credentials\", \"\", true, false].includes(val)\n  },\n  decoding: {\n    type: String,\n    default: void 0,\n    validator: (val) => [\"async\", \"auto\", \"sync\"].includes(val)\n  }\n};\nexport const useBaseImage = (props) => {\n  const options = computed(() => {\n    return {\n      provider: props.provider,\n      preset: props.preset\n    };\n  });\n  const attrs = computed(() => {\n    return {\n      width: parseSize(props.width),\n      height: parseSize(props.height),\n      alt: props.alt,\n      referrerpolicy: props.referrerpolicy,\n      usemap: props.usemap,\n      longdesc: props.longdesc,\n      ismap: props.ismap,\n      crossorigin: props.crossorigin === true ? \"anonymous\" : props.crossorigin || void 0,\n      loading: props.loading,\n      decoding: props.decoding\n    };\n  });\n  const modifiers = computed(() => {\n    return {\n      ...props.modifiers,\n      width: parseSize(props.width),\n      height: parseSize(props.height),\n      format: props.format,\n      quality: props.quality,\n      background: props.background,\n      fit: props.fit\n    };\n  });\n  return {\n    options,\n    attrs,\n    modifiers\n  };\n};\n","import { h, defineComponent, ref, computed, onMounted } from \"vue\";\nimport { useImage } from \"../composables.mjs\";\nimport { parseSize } from \"../utils/index.mjs\";\nimport { prerenderStaticImages } from \"../utils/prerender.mjs\";\nimport { baseImageProps, useBaseImage } from \"./_base.mjs\";\nimport { useHead } from \"#imports\";\nexport const imgProps = {\n  ...baseImageProps,\n  placeholder: { type: [Boolean, String, Number, Array], default: void 0 }\n};\nexport default defineComponent({\n  name: \"NuxtImg\",\n  props: imgProps,\n  emits: [\"load\"],\n  setup: (props, ctx) => {\n    const $img = useImage();\n    const _base = useBaseImage(props);\n    const placeholderLoaded = ref(false);\n    const sizes = computed(() => $img.getSizes(props.src, {\n      ..._base.options.value,\n      sizes: props.sizes,\n      modifiers: {\n        ..._base.modifiers.value,\n        width: parseSize(props.width),\n        height: parseSize(props.height)\n      }\n    }));\n    const attrs = computed(() => {\n      const attrs2 = _base.attrs.value;\n      if (props.sizes) {\n        attrs2.sizes = sizes.value.sizes;\n        attrs2.srcset = sizes.value.srcset;\n      }\n      return attrs2;\n    });\n    const placeholder = computed(() => {\n      let placeholder2 = props.placeholder;\n      if (placeholder2 === \"\") {\n        placeholder2 = true;\n      }\n      if (!placeholder2 || placeholderLoaded.value) {\n        return false;\n      }\n      if (typeof placeholder2 === \"string\") {\n        return placeholder2;\n      }\n      const size = Array.isArray(placeholder2) ? placeholder2 : typeof placeholder2 === \"number\" ? [placeholder2, placeholder2] : [10, 10];\n      return $img(props.src, {\n        ..._base.modifiers.value,\n        width: size[0],\n        height: size[1],\n        quality: size[2] || 50\n      }, _base.options.value);\n    });\n    const mainSrc = computed(\n      () => props.sizes ? sizes.value.src : $img(props.src, _base.modifiers.value, _base.options.value)\n    );\n    const src = computed(() => placeholder.value ? placeholder.value : mainSrc.value);\n    if (props.preload) {\n      const isResponsive = Object.values(sizes.value).every((v) => v);\n      useHead({\n        link: [{\n          rel: \"preload\",\n          as: \"image\",\n          ...!isResponsive ? { href: src.value } : {\n            href: sizes.value.src,\n            imagesizes: sizes.value.sizes,\n            imagesrcset: sizes.value.srcset\n          }\n        }]\n      });\n    }\n    if (process.server && process.env.prerender) {\n      prerenderStaticImages(src.value, sizes.value.srcset);\n    }\n    const imgEl = ref();\n    onMounted(() => {\n      if (placeholder.value) {\n        const img = new Image();\n        img.src = mainSrc.value;\n        img.onload = (event) => {\n          imgEl.value.src = mainSrc.value;\n          placeholderLoaded.value = true;\n          ctx.emit(\"load\", event);\n        };\n      } else {\n        imgEl.value.onload = (event) => {\n          ctx.emit(\"load\", event);\n        };\n      }\n    });\n    return () => h(\"img\", {\n      ref: imgEl,\n      key: src.value,\n      src: src.value,\n      ...attrs.value,\n      ...ctx.attrs\n    });\n  }\n});\n"],"names":[],"mappings":"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"}