import{_ as V}from"./Heading.d755f9e7.js";import{_ as L,b as t,d as s,e as a,E as j,p as A,n as q,H as E,c as T,m as D,s as F,h as Z,r as y,C as z,o as O,f as r,w as d,T as S,u as e,t as c,y as B,q as b,F as G,j as J,k as K}from"./entry.f5ec0d0a.js";import{u as Q,_ as U}from"./composables.7aacd8d9.js";import{_ as W}from"./ArrowRight.198138f3.js";import{u as X}from"./useAlgoliaInitIndex.8ae909ac.js";const Y={},ee={id:"loading-spinner",xmlns:"http://www.w3.org/2000/svg",class:"animate-spin",viewBox:"0 0 24 24",fill:"none"},te=a("path",{d:"M12 22C17.5228 22 22 17.5228 22 12H19C19 15.866 15.866 19 12 19V22Z",fill:"currentColor"},null,-1),se=a("path",{d:"M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z",fill:"currentColor"},null,-1),oe=[te,se];function ae(p,i){return t(),s("svg",ee,oe)}const ne=L(Y,[["render",ae]]),le=j({__name:"Button",props:{color:String},setup(p){return(i,u)=>(t(),s("button",{class:q(["flex items-center justify-center gap-x-2 w-full px-4 py-2 text-white text-center uppercase transition-colors duration-500",`bg-trso-${p.color} hover:bg-trso-${p.color}2`])},[A(i.$slots,"default")],2))}});function re(p){const u=p||D().algolia.globalIndex;if(!u)throw new Error("`[@nuxtjs/algolia]` Cannot search in Algolia without `globalIndex` or `indexName` passed as a parameter");const v=X(u),h=E(`${u}-search-result`,()=>null),w=async({query:f,requestOptions:m})=>{const _=await v.search(f,m);return h.value=_,_};return{result:T(()=>h.value),search:w}}const ce={key:0},ie={key:1},ue={class:"italic font-semibold"},_e={key:0,class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-trso-blue"},de={key:0},pe={key:0},he={class:"mb-4 lg:mb-8"},me=["src","alt"],ge={key:0,class:"text-base"},fe={key:0},xe={key:1},ye={key:1,class:"block px-4 py-2 text-trso-blue text-center border border-trso-blue"},be={key:1},ve={class:"text-lg text-center font-sans text-trso-yellow mb-8"},we={class:"text-lg text-center font-sans text-trso-blue mb-8"},$e={__name:"[search]",setup(p){const{locale:i}=F(),u=Q(),h=Z().params.search,{result:w,search:f}=re("movies"),m=y(0),_=y(!1),M=4,$=50,g=y(!1),n=z({hits:[],count:0,total:0,max:0});O(()=>{k()});async function N(){_.value=!0;try{await k(),m.value++}catch{}_.value=!1}async function k(){g.value=!0;const o=await f({query:`${String(h)}`,requestOptions:{hitsPerPage:M,page:m.value}});n.hits=[...n.hits,...o.hits],n.count=n.hits.length,n.total=o.nbHits,n.max=o.nbHits<$?o.nbHits:$,g.value=!0}return(o,C)=>{const P=V,I=ne,x=U,R=le,H=W;return t(),s("div",null,[r(P,{tag:"h1",tagStyle:"h1",color:"blue"},{default:d(()=>[e(n).total?(t(),s("span",ce,c(o.$t("pages.search.title")),1)):(t(),s("span",ie,c(o.$t("pages.search.noResults")),1)),B(" Â  "),a("span",ue,c(e(h)),1)]),_:1}),r(S,{name:"fade"},{default:d(()=>[e(g)?b("",!0):(t(),s("div",_e,[r(I,{class:"w-16 h-16"})]))]),_:1}),r(S,{name:"fade"},{default:d(()=>[e(g)?(t(),s("div",de,[e(n).total?(t(),s("div",pe,[a("ul",he,[(t(!0),s(G,null,J(e(n).hits,l=>(t(),s("li",{key:l.id},[r(x,{to:e(u)({name:"type-id-slug",params:{type:l.type==="series"?"tv-series":"movies",id:l.objectID,slug:`${l["slug_"+e(i)]}`}}),title:l["title_"+e(i)],class:"flex items-center gap-x-4 lg:gap-x-8 transition-colors duration-500 bg-white hover:bg-trso-blue2 text-trso-blue hover:text-white text-base lg:text-lg text-left p-2 lg:p-4"},{default:d(()=>[a("img",{src:l.poster,alt:`poster ${l["title_"+e(i)]}`,class:"w-12 h-auto"},null,8,me),a("span",null,[B(c(l["title_"+e(i)])+" ",1),l.director.length?(t(),s("span",ge,"("+c(l.director)+")",1)):b("",!0)])]),_:2},1032,["to","title"])]))),128))]),e(n).count<e(n).max?(t(),K(R,{key:0,color:"blue",onClick:C[0]||(C[0]=l=>N()),disabled:e(_),class:"text-white"},{default:d(()=>[e(_)?(t(),s("i",xe,[r(I,{class:"w-4 h-4"})])):(t(),s("span",fe,c(o.$t("loadMore")),1))]),_:1},8,["disabled"])):(t(),s("span",ye,c(o.$t("pages.search.noMore")),1))])):(t(),s("div",be,[a("p",ve,[r(x,{to:e(u)({name:"type-pages-page",params:{type:"tv-series",page:1}}),title:o.$t("header.series"),class:"flex items-center gap-x-2"},{default:d(()=>[a("i",null,[r(H,{class:"h-5 w-5"})]),a("span",null,c(o.$t("pages.search.seriesList")),1)]),_:1},8,["to","title"])]),a("p",we,[r(x,{to:e(u)({name:"type-pages-page",params:{type:"movies",page:1}}),title:o.$t("header.series"),class:"flex items-center gap-x-2"},{default:d(()=>[a("i",null,[r(H,{class:"h-5 w-5"})]),a("span",null,c(o.$t("pages.search.moviesList")),1)]),_:1},8,["to","title"])])]))])):b("",!0)]),_:1})])}}},Be=L($e,[["__scopeId","data-v-462d5cd0"]]);export{Be as default};
